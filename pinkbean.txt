import maple_story.txt 초기화

register NO_JUMP_HEIGHT

alias [PLAY_STYLE] among "USER_INPUT" "CHRITIAS_FLAT" "MISERY_FOREST_2"
import play_style.txt [PLAY_STYLE]


assign HP_PORTION 55
assign MP_PORTION 20


register MOVE_TO_RIGHT
assign MOVE_TO_RIGHT true

register CHECK_JUMP
assign CHECK_JUMP 0


register HIGH_JUMP
assign HIGH_JUMP false

register ROLL_ATTACK
assign ROLL_ATTACK false

register PINK_GENESIS
assign PINK_GENESIS false

register SUMMON_ALL
assign SUMMON_ALL false

register SONIC_BOOM
assign SONIC_BOOM false

register PLANT_GROW
assign PLANT_GROW false

register RELAX_BUFF
assign RELAX_BUFF false

register CHEER_BUFF
assign CHEER_BUFF false

register WORRIOR_BUFF
assign WORRIOR_BUFF false

register PINK_SHADOW
assign PINK_SHADOW false


sync
	register PL_POS with x y width height num lt tp rt bm
	
	iterate forever
	
		snapshot
		
		sub			
			alias [MM_POS] PL_POS
			import maple_story.txt 플레이어위치_미니맵
		end
		when PL_POS.x is not below 0
			when PL_POS.x is less than MOVE_DEST_RANGE.left
				assign MOVE_TO_RIGHT true
			end
			when PL_POS.x is greater than MOVE_DEST_RANGE.right
				assign MOVE_TO_RIGHT false
			end
		end

		assign SKILL_INDEX.col 4
		assign SKILL_INDEX.row 0	
		import maple_story.txt 스킬활성화_체크	
		when SKILL_TEST is true
			assign PINK_SHADOW true
		end

		assign SKILL_INDEX.col 5
		assign SKILL_INDEX.row 0	
		import maple_story.txt 스킬활성화_체크	
		when SKILL_TEST is true
			assign RELAX_BUFF true
		end

		assign SKILL_INDEX.col 6
		assign SKILL_INDEX.row 0
		import maple_story.txt 스킬활성화_체크	
		when SKILL_TEST is true
			assign CHEER_BUFF true
		end

		assign SKILL_INDEX.col 8
		assign SKILL_INDEX.row 0
		import maple_story.txt 스킬활성화_체크	
		when SKILL_TEST is true
			assign WORRIOR_BUFF true
		end
		
		assign SKILL_INDEX.col 3
		assign SKILL_INDEX.row 1	
		import maple_story.txt 스킬활성화_체크	
		when SKILL_TEST is true
			assign SONIC_BOOM true
		end

		assign SKILL_INDEX.col 4
		assign SKILL_INDEX.row 1	
		import maple_story.txt 스킬활성화_체크	
		when SKILL_TEST is true
			assign PINK_GENESIS true
		end

		assign SKILL_INDEX.col 2
		assign SKILL_INDEX.row 1	
		import maple_story.txt 스킬활성화_체크	
		when SKILL_TEST is true
			assign SUMMON_ALL true
		end

		assign SKILL_INDEX.col 6
		assign SKILL_INDEX.row 1	
		import maple_story.txt 스킬활성화_체크	
		when SKILL_TEST is true
			assign PLANT_GROW true
		end

		assign SKILL_INDEX.col 1
		assign SKILL_INDEX.row 1	
		import maple_story.txt 스킬활성화_체크	
		when SKILL_TEST is true
			assign ROLL_ATTACK true
		end
		
		when PL_POS.y is greater than NO_JUMP_HEIGHT
			assign CHECK_JUMP computing CHECK_JUMP add 1
			when CHECK_JUMP is greater than 60
				assign CHECK_JUMP random over 30
				assign SKILL_INDEX.col 9
				assign SKILL_INDEX.row 1	
				import maple_story.txt 스킬활성화_체크	
				when SKILL_TEST is true
					assign HIGH_JUMP true
				end				
			end
		end
		
		delay for MONITOR_DELAY
	end
	
with

	iterate forever

		when PINK_SHADOW is true
			key 5 for 100
			delay for 700
			assign PINK_SHADOW false
		end
		when RELAX_BUFF is true
			key 6 for 100
			delay for 700
			assign RELAX_BUFF false
		end
		when CHEER_BUFF is true
			key 7 for 100
			delay for 700
			assign CHEER_BUFF false
		end
		when WORRIOR_BUFF is true
			key 9 for 100
			delay for 900
			assign WORRIOR_BUFF false
		end
		when SONIC_BOOM is true
			key f for 100
			delay for 700
			assign SONIC_BOOM false
		end
		when PLANT_GROW is true
			key w for 100
			delay for 700
			assign PLANT_GROW false
		end
		when PINK_GENESIS is true
			key g for 100
			delay for 700
			assign PINK_GENESIS false
		end
		when SUMMON_ALL is true
			key d for 100
			delay for 700
			assign SUMMON_ALL false
		end
	
		when HIGH_JUMP is true

			delay for 500
			key v for 1500
			delay for 600
			when MOVE_TO_RIGHT is true
				key left for 400
				assign MOVE_TO_RIGHT false
			otherwise 
				key right for 400
				assign MOVE_TO_RIGHT true
			end
			assign HIGH_JUMP false
		
		otherwise
		
			when ROLL_ATTACK is true
				
				sync
					key s for 7 sec
				with
					iterate 14 times
						when MOVE_TO_RIGHT is true
							key right for 500
						otherwise 
							key left for 500
						end
					end
				end
				assign ROLL_ATTACK false
			
			otherwise
			
				sync
					key z for 1500					
				with
					iterate 4 times
						when MOVE_TO_RIGHT is true
							key right for 550
						otherwise 
							key left for 550
						end
					end
				end
			end
		end

	end
	
with
	iterate forever
	
		register _SPR with x y
		sprite _SPR for 7 over 150 0 1150 70
		when _SPR.x is greater than 0
			assign _SPR.y computing _SPR.y add 8
			button left click at _SPR.x _SPR.y
			delay for 200
			button none at 650 380
		end
		
		assign BUTTON_ID 2
		import maple_story.txt 버튼누르기

		assign BUTTON_ID 3
		import maple_story.txt 버튼누르기		
		
		import maple_story.txt 거짓말탐지기_체크
		when TRUTH_TEST is true
			finish sync
		end
		
		import maple_story.txt 석화_체크
		when STONE_TEST is true
			iterate 5 times
				key left for 50
				delay for 50
				key right for 50
				delay for 50
			end
		
		otherwise		
			
			delay for 1 sec
		end
		
	end
	
with
	iterate forever
		import maple_story.txt HP_체크
		when HP_TEST is true
			key f1 for 100
			delay for 700
		otherwise
			delay for MONITOR_DELAY
		end
	end
	
with
	iterate forever
		import maple_story.txt MP_체크
		when MP_TEST is true
			key f2 for 100
			delay for 700
		otherwise
			delay for MONITOR_DELAY
		end
	end
	
with
	iterate forever

		delay for 6 min	
		key = for 500
	end

end

sound alert

